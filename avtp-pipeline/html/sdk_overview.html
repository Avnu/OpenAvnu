<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Open-AVB AVTP Pipeline SDK: EAVB SDK Overview</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="stc_logo_small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Open-AVB AVTP Pipeline SDK
   &#160;<span id="projectnumber">1.4</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Table&#160;of&#160;Contents</span></a></li>
      <li class="current"><a href="pages.html"><span>Topics</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">EAVB SDK Overview </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="sdk_overview_introduction"></a>
Introduction </h1>
<p>Symphony Teleca Corporation (OPENAVB) has developed a software Protocol Stack to support Ethernet Audio Video Bridging (EAVB or AVB) on a variety of platforms. The software includes explicit Operating System and Hardware Abstraction Layers (OSAL and HAL) to facilitate rapid and efficient porting of the generic stack to specific platforms. The complete OPENAVB EAVB implementation, and its role within an overall EAVB system are discussed in OPENAVB?s Ethernet Audio Video Bridging (AVB) High Level Specification (OPENAVB13-01059).</p>
<p>The OPENAVB AVB stack is designed to work on both General Purpose OSes (GPOS), such as Linux, as well as Real-Time OSes (RTOS). There are some difference in concepts and terms between a GPOS and RTOS, for example threads vs tasks, or the concept of multiple processes. For the purposes of the SDK guides the terms thread and task are used interchangeably.</p>
<p>The guides in this SDK focus on integrating the OPENAVB AVB stack in an application, developing interface module components and configuration AVB streams. These guides are separated into four sections:</p>
<ul>
<li><a class="el" href="sdk_overview.html">EAVB SDK Overview</a></li>
<li><a class="el" href="sdk_integration.html">EAVB Integration</a></li>
<li><a class="el" href="sdk_avtp_interface_module_dev.html">AVTP Interface Module Development</a></li>
<li><a class="el" href="sdk_avtp_stream_cfg.html">AVTP Stream Configuration</a></li>
</ul>
<p>This overview section will cover general architecture.</p>
<p><br/>
 </p>
<h1><a class="anchor" id="sdk_overview_glossary"></a>
Glossary </h1>
<p><b>AAF:</b> AVTP Audio Format</p>
<p><b>AVB:</b> Audio Video Bridging (used interchangeably with EAVB)</p>
<p><b>AVB Stack:</b> The primary functionality that implements the various AVB protocols</p>
<p><b>AVTP:</b> Audio Video Transport Protocol</p>
<p><b>EAVB:</b> Ethernet Audio Video Bridging (used interchangeably with AVB)</p>
<p><b>EMAC:</b> Ethernet Media Access Control</p>
<p><b>FQTSS:</b> Forwarding and Queuing enhancements for Time Sensitive Streams</p>
<p><b>GPOS:</b> General purpose OS</p>
<p><b>gPTP:</b> generalized Precision Time Protocol</p>
<p><b>HAL:</b> Hardware Abstraction Layer</p>
<p><b>Listener:</b> Receives an AVTP stream, unpacks it and pushes it to a media sink for playback. It consists of a dedicated task and uses functionality in the AVTP module, one mapping module and one interface module.</p>
<p><b>IEEE:</b> Institute of Electrical and Electronics Engineers</p>
<p><b>Interface Module:</b> An AVTP component that when called from the talker pulls data from a media source and pushes it onto the media queue in the format expected by the mapping module running on the talker. When called from a listener it pulls data from the media queue and pushes it to the media sink for playback.</p>
<p><b>ISR:</b> Interrupt Service Routine</p>
<p><b>MAAP:</b> Multicast Address Allocation Protocol</p>
<p><b>MAC:</b> Media Access Control</p>
<p><b>Mapping Module:</b> An AVTP component that when called from the talker pulls data from the media queue and packages it into the AVTP data payload according to a specific AVB encapsulation. When called from a listener it unpacks the AVTP data payload according to the specific AVB encapsulation and pushes it on to the media queue.</p>
<p><b>Media Queue:</b> A circular FIFO container used to opaquely pass media data blocks between interface modules and mapping modules. This is the only way interface modules and mapping modules communicate.</p>
<p><b>MJPEG:</b> Motion Joint Photographic Expert Group</p>
<p><b>MPEG2-TS:</b> Motion Picture Expert Group (version 2) Transport Stream</p>
<p><b>OS:</b> Operating System</p>
<p><b>OSAL:</b> Operating System Abstraction Layer</p>
<p><b>SDK:</b> Software Development Kit</p>
<p><b>SR:</b> Stream Reservation</p>
<p><b>RTOS:</b> Real-time OS</p>
<p><b>SRP:</b> Stream Reservation Protocol</p>
<p><b>OPENAVB:</b> Symphony Teleca Corporation</p>
<p><b>Stream:</b> A series of AVTP data packets</p>
<p><b>Talker:</b> Takes an audio or video source and transmits it as an AVTP stream on the AVB network. It consists of a dedicated task and uses functionality in the AVTP module, one mapping module and one interface module.</p>
<p><br/>
 </p>
<h1><a class="anchor" id="sdk_overview_architecture"></a>
Architecture </h1>
<p>The complete OPENAVB EAVB implementation and its role within an overall EAVB system are discussed in OPENAVB?s Ethernet Audio Video Bridging (AVB) High Level Specification (OPENAVB13-01059).</p>
<p>What follows in this section are details that more directly effect the use and understanding of the SDK.</p>
<p><br/>
 Below is the component diagram of the Core AVB stack. Notice that the interface modules are not shown as part of the formal core stack but instead the interfaces that they use in the core stack are shown. This is also true for the interfaces the host application will use (TL APIs).</p>
<div class="image">
<img src="Core_AVB.png" alt="Core_AVB.png"/>
<div class="caption">
Core AVB</div></div>
<p><br/>
 General Purpose OSes will generally have the core AVB stack split across multiple processes. Whereas in an RTOS everything sits within a single execution image. Here is a process diagram of the components split across processes in the Linux reference implementation.</p>
<div class="image">
<img src="fig1.png" alt="fig1.png"/>
<div class="caption">
AVB Components</div></div>
<p>As shown above the AVTP component of AVB is present in the application task. The libopenavbAVBStack library gets initialized and loaded via the APIs exposed and documented here. This static library implements that AVTP functionality as well as controlling talker and listener initialization and life cycle. The PTP task initialization is handled during stack initialization.</p>
<p><br/>
 The common AVTP stream data flow is shown here.</p>
<div class="image">
<img src="AVTP_Data_Flow.png" alt="AVTP_Data_Flow.png"/>
<div class="caption">
AVTP Data Flow</div></div>
<p><br/>
 The diagram below shows an audio stream flowing through the AVB system on the Linux platform. Typically the talker and listener will be in different tasks and may use different interfaces.</p>
<div class="image">
<img src="fig2.png" alt="fig2.png"/>
<div class="caption">
AVB Audio Stream Flow</div></div>
<p><br/>
 Understanding the stream life-cycle is important for use of this SDK. Below are sequence diagrams that show the component interaction for key stream use cases.</p>
<div class="image">
<img src="Stream_Initialize.png" alt="Stream_Initialize.png"/>
<div class="caption">
Stream Initialization</div></div>
<p><br/>
 </p>
<div class="image">
<img src="Talker_Stream_Data_Flow.png" alt="Talker_Stream_Data_Flow.png"/>
<div class="caption">
Talker Stream Data Flow</div></div>
<p><br/>
 </p>
<div class="image">
<img src="Listener_Stream_Data_Flow.png" alt="Listener_Stream_Data_Flow.png"/>
<div class="caption">
Listener Stream Data Flow</div></div>
<p><br/>
 </p>
<h1><a class="anchor" id="sdk_overview_integration"></a>
Integration, Extension and Configuration </h1>
<p>Three distinct uses of the SDK are as follows.</p>
<p><b>Integration:</b> This refers to the integration of the OPENAVB AVB stack into an existing or new application. This is also sometimes referred to as the hosting application. For details related to this see <a class="el" href="sdk_integration.html">EAVB Integration</a></p>
<p><b>AVTP Interface Module Development:</b> In order for the AVB stack to be used it must have interaction with media data sources and sinks on the platform. This is accomplished with Interface modules. The AVB stack ported to a platform may include some interface modules already but typically new interface modules are needed for the specific hardware and drivers being targeted. See <a class="el" href="sdk_avtp_interface_module_dev.html">AVTP Interface </a>Module Development" for more details.</p>
<p><b>Configuration:</b> Configuration can be split into 2 distinct area. Hosting application configuration and stream configuration. Hosting application configuration is port specifici and therefore not covered in detail in this SDK. However, in the configuration guide section of the SDK some host application configuration example are provided as a point of reference. The other primary area of configuration is related to stream. See the section <a class="el" href="sdk_avtp_stream_cfg.html">AVTP Stream </a>Configuration" for more details.</p>
<p><br/>
 </p>
<h1><a class="anchor" id="sdk_overview_platform"></a>
Platform Specific Considerations </h1>
<p>The OPENAVB AVB stack is designed for portability covering both general purpose OSes and real-time OSes. The base public APIs of the SDK do not change depending on the port. However, some elements of working with the SDK do change depending on the port of the OPENAVB stack. See the release notes for the specific port for details that may be beyond the common SDK usage.</p>
<h2>Threads / Tasks</h2>
<p>Within the SDK guides the terms threads and tasks are used interchangeability and for the purposes of the SDK they can be considered the same.</p>
<h2>Processes</h2>
<p>Some platform OSes support multiple processes. The OPENAVB stack for a particular port may make use of multiple processes. For example in the Linux reference implementation gPTP resided in a separate process. Additionally in this reference implementation the talk / listener end-station functionality for each stream can be in a single process or split across multiple processes. Whereas in a RTOS there isn't typically the concept of multile processes.</p>
<h2>Configuration Overview</h2>
<p>Configuration of both the host application as well as the streams can vary based on platform capabilities. For example on configuration information may come from .ini files on the device and in other platforms there may not be a file system in which case configuration may be set at build time.</p>
<h2>Startup</h2>
<p>See the port specific Release Notes for the details on AVB start up.</p>
<h2>Libraries</h2>
<p>The AVB core stack commonly is build as a static library and linked with a hosting application. Interface modules may be built differently depending on the platform. In some cases they my be dynamic libraries and other cases they may be static libraries. It is also possible that the interface modules will be built with the host application or as part of the AVB core library. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 30 2015 08:29:35 for Open-AVB AVTP Pipeline SDK by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
